<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<?DOCTYPE html?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><title>Example Sketches </title><meta charset="utf-8"/><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta name="google-site-verification" content="plo81K3pJKsnzIVI5_O4Ug7ewR52af_-pxoKMTDTJYY"/><script type="text/javascript" src="http://start.shrimping.it/style/require/require.js"> </script><script>
                require.config({
                    baseUrl: 'http://start.shrimping.it/style/require',
                });
            </script><script type="text/javascript" src="http://start.shrimping.it/style/index.js"> </script><link rel="alternate" hreflang="en-gb" href="http://start.shrimping.it"/><link rel="alternate" hreflang="en-us" href="http://start.shrimping.it"/><link href="http://fonts.googleapis.com/css?family=Oswald:400,300,700|Lusitana:400,700|Open+Sans:400,800" rel="stylesheet" type="text/css"/><link href="http://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic,900,900italic" rel="stylesheet" type="text/css"/><link href="http://fonts.googleapis.com/css?family=Merriweather+Sans:400,300,300italic,400italic,700italic,700,800,800italic" rel="stylesheet" type="text/css"/><link rel="stylesheet" type="text/css" href="http://start.shrimping.it/style/normalize.css"/><link rel="stylesheet" type="text/css" href="http://start.shrimping.it/style/index.css"/><!-- Highlight JS for code highlighting following https://highlightjs.org/usage/ --><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css"/></head><body class="project pov program"><header class="navigation" role="banner"><div class="navigation-wrapper"><a href="http://start.shrimping.it//index.html" class="logo"><img src="http://start.shrimping.it/style/brand/logomenu.png" alt="Logo Image"/></a><a href="javascript:void(0)" class="navigation-menu-button" id="js-mobile-menu">MENU</a><nav role="navigation"><ul id="js-navigation-menu" class="navigation-menu show"><li class="nav-link more"><a href="./">Persistence of Vision Project</a><ul class="submenu"><li><a href="index.html">Introducing It</a></li><li><a href="build.html">Wiring It</a></li><li><a href="program.html">Programming It</a></li><li><a href="debug.html">Debugging It</a></li><li><a href="../../kit/pov.html">Buying It</a></li></ul></li><li class="nav-link more"><a href="http://start.shrimping.it/index.html#project">Other Projects</a><ul class="submenu wide"><li><a href="http://start.shrimping.it/project/blink/build.html">...blink an LED</a></li><li><a href="http://start.shrimping.it/project/pov/build.html">...paint with light</a></li><li><a href="http://start.shrimping.it/project/keyboard/build.html">...make a Banana Piano</a></li><li><a href="http://start.shrimping.it/project/memory/build.html">...test your melody memory</a></li><li><a href="http://start.shrimping.it/project/alarmclock/build.html">...invent a Clock</a></li><li><a href="http://start.shrimping.it/project/ledclock/build.html">...show the time with LEDs</a></li></ul></li><li class="nav-link more"><a href="http://start.shrimping.it/kit/">Buy Kits</a><ul class="submenu wide"><li><a href="http://start.shrimping.it/kit/shrimp.html">Shrimp Parts</a></li><li><a href="http://start.shrimping.it/kit/pov.html">Persistence of Vision</a></li><li><a href="http://start.shrimping.it/kit/keyboard.html">Conductive Keyboard</a></li><li><a href="http://start.shrimping.it/kit/memory.html">Memory Game [Simon]</a></li><li><a href="http://start.shrimping.it/kit/alarmclock.html">Alarm Clock</a></li><li><a href="http://start.shrimping.it/kit/ledclock.html">LED Clock</a></li><li><a href="http://start.shrimping.it/kit/stripboard.html">Stripboard</a></li><li><a href="http://start.shrimping.it/kit/breadboard400.html">400 point Breadboard</a></li><li><a href="http://start.shrimping.it/kit/breadboard170.html">170 point Breadboard</a></li><li><a href="http://start.shrimping.it/kit/power3xAAA.html">3xAAA Battery Pack</a></li><li><a href="http://start.shrimping.it/kit/cp2102.html">USB UART module</a></li></ul></li><!--
                        <li class="nav-link more">
                            <a href="javascript:void(0)">Teaching</a>
                            <ul class="submenu">
                                <li class="nav-link"><a href="{$serverroot}/#workshop">Workshops</a></li>
                                <li class="nav-link"><a href="{$serverroot}index.html#testimonials" class="scroll-on-page-link" >Testimonials</a></li>
                            </ul>
                        </li>
                        --><li class="nav-link more"><a href="javascript:void(0)">Contributing</a><ul class="submenu"><li class="nav-link"><a href="http://start.shrimping.it/contribute.html#feedback">Feedback</a></li><li class="nav-link"><a href="http://start.shrimping.it/contribute.html#donate">Donating</a></li><li class="nav-link"><a href="http://start.shrimping.it/index.html#kit" class="scroll-on-page-link">Buying</a></li></ul></li><li class="nav-link more"><a href="javascript:void(0)">More</a><ul class="submenu"><li class="nav-link"><a href="http://start.shrimping.it/index.html#about" class="scroll-on-page-link">About Us</a></li><!--
                                <li class="nav-link"><a href="{$serverroot}license.html">Licensing</a></li>
                                --><li class="nav-link"><a href="http://start.shrimping.it/offer.html">Special Offers</a></li><li class="nav-link"><a href="http://start.shrimping.it/contact.html">Contact</a></li></ul></li></ul></nav><div class="navigation-tools"><div class="search-bar"><form role="search" action="http://duckduckgo.com/" method="get"><input type="hidden" value="start.shrimping.it" name="sites"/><input type="hidden" value="1" name="kh"/><input type="hidden" value="1" name="kn"/><input type="hidden" value="1" name="kac"/><input type="search" placeholder="Enter Search" name="q"/><button type="submit"><img src="http://start.shrimping.it/style/brand/search-icon.png" alt="Search Icon"/></button></form></div></div></div></header><section class="content">
<h1 id="example-sketches">Example Sketches</h1>
<p>You will be able to upload the programs described below to your <a href="build.html">Persistence of Vision circuit</a> once you have completed <a href="../shrimp/program.html">these instructions</a> to install the relevant software on your laptop. If they have been properly installed, our sketches should be accessible under File=&gt;Sketchbook=&gt;shrimpingit.</p>
<h2 id="led-pattern---hard-coded">LED pattern - hard-coded</h2>
<p>To start with, let's control the 8 LEDs to produce a static pattern by running the <a href="https://github.com/ShrimpingIt/projects/blob/master/sketchbook/shrimpingit/pov/Pov01PatternFixed/Pov01PatternFixed.ino">Pov01PatternFixed</a> sketch.</p>
<p>The key part of the code is shown below, which controls eight digital output pins (which can be on or off) by 'writing' a value of <code class="cpp">true</code> or <code class="cpp">false</code>.</p>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp">  <span class="co">//turn on selected LEDs</span>
  digitalWrite(<span class="dv">9</span>,  <span class="kw">true</span> );
  digitalWrite(<span class="dv">10</span>, <span class="kw">false</span>); 
  digitalWrite(<span class="dv">11</span>, <span class="kw">true</span> ); 
  digitalWrite(<span class="dv">12</span>, <span class="kw">false</span>); 
  digitalWrite(A1, <span class="kw">true</span> ); 
  digitalWrite(A2, <span class="kw">false</span>); 
  digitalWrite(A3, <span class="kw">true</span> ); 
  digitalWrite(A4, <span class="kw">false</span>); </code></pre></div>
<h2 id="led-pattern---stored-in-a-variable">LED pattern - stored in a variable</h2>
<p>Next we will show how the 8 LEDs can produce the same pattern by reading bits from a byte in the <a href="https://github.com/ShrimpingIt/projects/blob/master/sketchbook/shrimpingit/pov/Pov02PatternStored/Pov02PatternStored.ino">Pov02PatternStored</a> sketch.</p>
<p>The key parts of this code are show below. A byte stores a binary pattern, and each bit of the byte is examined in turn (using <a href="https://www.arduino.cc/en/Reference/BitwiseAnd">bitwise &amp;</a>) to see if each of the eight lights should be lit.</p>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp">byte pattern = <span class="bn">0b10101010</span>;</code></pre></div>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp">  <span class="co">//check which 'bits' are set in the byte called 'pattern'</span>
  digitalWrite(<span class="dv">9</span>,    (pattern &amp;amp; <span class="bn">0b00000001</span>) != <span class="dv">0</span>);
  digitalWrite(<span class="dv">10</span>,   (pattern &amp;amp; <span class="bn">0b00000010</span>) != <span class="dv">0</span>); 
  digitalWrite(<span class="dv">11</span>,   (pattern &amp;amp; <span class="bn">0b00000100</span>) != <span class="dv">0</span>); 
  digitalWrite(<span class="dv">12</span>,   (pattern &amp;amp; <span class="bn">0b00001000</span>) != <span class="dv">0</span>); 
  digitalWrite(A1,   (pattern &amp;amp; <span class="bn">0b00010000</span>) != <span class="dv">0</span>); 
  digitalWrite(A2,   (pattern &amp;amp; <span class="bn">0b00100000</span>) != <span class="dv">0</span>); 
  digitalWrite(A3,   (pattern &amp;amp; <span class="bn">0b01000000</span>) != <span class="dv">0</span>); 
  digitalWrite(A4,   (pattern &amp;amp; <span class="bn">0b10000000</span>) != <span class="dv">0</span>); </code></pre></div>
<p>In each case, if the bit <strong><em>isn't</em></strong> set, then the result of the <code class="cpp">&amp;</code> operator is 0. The phrase <code class="cpp">!= 0</code> means 'not equal to zero'.</p>
<h2 id="led-pattern---using-a-while-loop">LED pattern - using a 'while' loop</h2>
<p>Instead of having separate lines of code for every LED, we use a while loop in <a href="https://github.com/ShrimpingIt/projects/blob/master/sketchbook/shrimpingit/pov/Pov03PatternWhile/Pov03PatternWhile.ino">Pov03PatternWhile</a>.</p>
<p>The key parts of this code are shown below. Instead of explicitly writing eight lots of instructions to query each bit and control each light, we have a single set of instructions, which is executed eight times.</p>
<p>The code relies on an array containing the pin numbers. A bitCounter is used to count how many bits of the pattern have already been processed. The bitValue starts as 1, then becomes 2, then 4, then 8 and so on, corresponding with each digit of the binary number.</p>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp">    <span class="dt">int</span> pinNumbers[] = { <span class="dv">9</span>,<span class="dv">10</span>,<span class="dv">11</span>,<span class="dv">12</span>,A1,A2,A3,A4 };</code></pre></div>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp">    bitCounter = <span class="dv">0</span>;
    bitValue = <span class="bn">0b00000001</span>;
    <span class="kw">while</span>(bitCounter &amp;lt; totalBits){
        digitalWrite(pinNumbers[bitCounter], (pattern &amp;amp; bitValue) != <span class="dv">0</span>);   
        bitCounter = bitCounter + <span class="dv">1</span>;
        bitValue = bitValue * <span class="dv">2</span>;
    }</code></pre></div>
<h2 id="led-pattern---using-a-function-call">LED pattern - using a function call</h2>
<p>Instead of having the sequence of steps to light the LEDs embedded in routine called 'loop', we put those steps in their own routine, called setLights(...) in <a href="https://github.com/ShrimpingIt/projects/blob/master/sketchbook/shrimpingit/pov/Pov04PatternFunction/Pov04PatternFunction.ino">Pov04PatternFunction</a></p>
<p>The key parts of this code are shown below. We've moved the steps which turn on and off the lights into their own routine called, <code class="cpp">setLights</code> and the steps in <code class="cpp">loop</code> (which are repeated forever on a loop) tell <code class="cpp">setLights</code> to execute with a particular pattern.</p>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="dt">void</span> loop() {
  setLights(pattern);
  delay(<span class="dv">1</span>);
  setLights(empty);
  delay(<span class="dv">2</span>);
}</code></pre></div>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="dt">void</span> setLights(byte pattern){
  bitCounter = <span class="dv">0</span>;
  bitValue = <span class="dv">1</span>;
  <span class="kw">while</span>(bitCounter &amp;lt; totalBits){
    digitalWrite(pinNumbers[bitCounter], (pattern &amp;amp; bitValue) != <span class="dv">0</span>); <span class="co">//turn on the LED if the 'pattern' value has that bit set  </span>
    bitCounter = bitCounter + <span class="dv">1</span>;
    bitValue = bitValue * <span class="dv">2</span>;
  }
}</code></pre></div>
<h2 id="led-pov---painting-a-sequence-of-patterns">LED POV - Painting a sequence of patterns</h2>
<p>Previously we were visiting a sequence of bits, and setting the lights to a given pattern. Now we go 'up a level' by doing the same thing for a <strong><em>sequence of patterns</em></strong>. If we upload <a href="https://github.com/ShrimpingIt/projects/blob/master/sketchbook/shrimpingit/pov/Pov05SequenceSmiley/Pov05SequenceSmiley.ino">Pov05SequenceSmiley</a> and attach a battery pack, then <strong><em>waving it in the air should paint a smiley face</em></strong>.</p>
<p>The key parts of this code are shown below. The byte array called <code class="cpp">patternSequence</code> contains a series of vertical columns, which make up a smiley face.</p>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp">byte patternSequence[] = {
  <span class="bn">0b00111100</span>,
  <span class="bn">0b01001110</span>,
  <span class="bn">0b11011011</span>,
  <span class="bn">0b11011111</span>,
  <span class="bn">0b11011111</span>,
  <span class="bn">0b11011011</span>,
  <span class="bn">0b01001110</span>,
  <span class="bn">0b00111100</span>
};</code></pre></div>
<p>If you inspect the byte array carefully, you can see the image below, tipped to the right (each byte is a vertical column, starting from the left side)...</p>
<p><img src="http://shrimping.it/blog/wp-content/uploads/2012/11/smilie_binary-250x300.png" alt="Smiley Face"/></p>
<h2 id="led-pov---painting-the-arduino-logo">LED POV - Painting the Arduino logo</h2>
<p>Just for fun, we do the same thing with a different pattern - <a href="https://upload.wikimedia.org/wikipedia/commons/8/87/Arduino_Logo.svg">the Arduino Logo</a> with our sketch <a href="https://github.com/ShrimpingIt/projects/blob/master/sketchbook/shrimpingit/pov/Pov06SequenceArduino/Pov06SequenceArduino.ino">Pov06SequenceArduino</a>. Of course this is best done with Blue LEDs!</p>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp">byte patternSequence[] = {
  <span class="bn">0b00111000</span>,
  <span class="bn">0b01000100</span>,
  <span class="bn">0b10010010</span>,
  <span class="bn">0b10010010</span>,
  <span class="bn">0b10010010</span>,
  <span class="bn">0b01000100</span>,
  <span class="bn">0b00101000</span>,
  <span class="bn">0b00010000</span>,
  <span class="bn">0b00101000</span>,
  <span class="bn">0b01000100</span>,
  <span class="bn">0b10010010</span>,
  <span class="bn">0b10111010</span>,
  <span class="bn">0b10010010</span>,
  <span class="bn">0b01000100</span>,
  <span class="bn">0b00111000</span>
};</code></pre></div>
<p><img src="./photos/arduino_logo_480.png" alt="Arduino Logo"/></p>
<h2 id="led-pov---painting-text-in-the-air">LED POV - Painting text in the air</h2>
<p>Ourlast demonstration sketch is the best. We have exported the 8-bit font information from a Commodore 64 into an Arduino sketch, so that learners can paint their name or choice of message in the air. Simply change the 'message' value in <a href="https://github.com/ShrimpingIt/projects/blob/master/sketchbook/shrimpingit/pov/Pov07PaintText/Pov07PaintText.ino">Pov07PaintText</a> to choose your own text!</p>
<p><img src="./show.jpg" alt="Illusion effect"/></p>
<h2 id="exploring-our-examples">Exploring our examples</h2>
<p>All the code examples for the <a href="build.html">POV circuit</a> can be browsed on the web at <a href="https://github.com/ShrimpingIt/projects/tree/master/sketchbook/shrimpingit/pov" class="uri">https://github.com/ShrimpingIt/projects/tree/master/sketchbook/shrimpingit/pov</a></p>
<h1 id="future-developments">Future developments</h1>
<p>Why not add a tilt-switch to 'reverse the polarity' so the circuit can tell whether it is moving from left-to-right or from right-to-left?</p>
<p>Attach a <a href="../../kit/stripboard.html">soldered version</a> of the circuit securely to a bicycle wheel or wind turbine</p>
</section><footer class="footer" role="contentinfo"><div class="footer-logo"><img src="http://start.shrimping.it/style/brand/logomenu.png" alt="Logo image"/></div><div class="footer-links"><ul><li><h3>Community</h3></li><li><a href="http://start.shrimping.it/project/">Projects</a></li><!--
                    <li><a href="{$serverroot}support.html">Support</a></li>
                    <li><a href="{$serverroot}license.html">Licensing</a></li>
                    --></ul><ul><li><h3>Commercial</h3></li><li><a href="http://start.shrimping.it//#kit">Kits</a></li><li><a href="http://start.shrimping.it//#workshop">Workshops</a></li><!--
                    <li><a href="{$serverroot}workshop/cpd.html">Training</a></li>
                    --></ul><ul><li><h3>More</h3></li><li><a href="http://start.shrimping.it/contact.html">Contact Us</a></li><li><a href="http://start.shrimping.it/contact.html#social">Follow Us</a></li><li><a href="http://start.shrimping.it/#what">About Us</a></li></ul></div><hr/><p>
                Thanks to the <a href="http://arduino.cc">Arduino</a> community for the amazing foundations on which the Shrimp and @ShrimpingIt projects are based.
                Thanks to <a href="http://fritzing.org">Fritzing</a> for vector graphics elements. Flickr user <a href="https://www.flickr.com/photos/randomskk/">Adam Greig</a> for cover image.
            </p></footer><script>
            //<!--
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
            ga('create', 'UA-36299759-2', 'auto');
            ga('send', 'pageview');
            //--></script><script src="//cdnjs.cloudflare.com/ajax/libs/minicart/3.0.6/minicart.min.js"/><script>
            paypal.minicart.render();
        </script></body></html>
